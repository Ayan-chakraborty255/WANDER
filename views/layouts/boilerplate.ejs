<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WANDERLUST</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/css/bootstrap-select.min.css"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Jakarta+Sans:wght@300;400;500;600&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/style.css" />
    <link rel="stylesheet" href="/rating.css" />
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  </head>

  <body>
    <%- include("../includes/navbar.ejs") %>
    <main>
      <div class="container">
        <%- include("../includes/flash.ejs") %> <%- body %>
      </div>
    </main>

    <%- include("../includes/footer.ejs") %>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap-select@1.14.0-beta3/dist/js/bootstrap-select.min.js"></script>
    <script src="/script.js"></script>
    <script
      src="https://maps.googleapis.com/maps/api/js?key=<%= googleMapsKey %>&callback=initMap"
      async
      defer
    ></script>
    
    <script>
      function initMap() {
        const mapDiv = document.getElementById("map");
        if (!mapDiv) return;

        const lat = parseFloat(mapDiv.dataset.lat);
        const lng = parseFloat(mapDiv.dataset.lng);
        const title = mapDiv.dataset.title;

        const map = new google.maps.Map(mapDiv, {
          zoom: 9,
          center: { lat, lng },
        });

        const marker = new google.maps.Marker({
          position: { lat, lng },
          map: map,
          icon: {
            url: "/images/home.png",
            scaledSize: new google.maps.Size(42, 42),
            anchor: new google.maps.Point(21, 42),
          },
          animation: google.maps.Animation.DROP,
        });

        const infoWindow = new google.maps.InfoWindow({
          content: `
        <div style="
          font-family: 'Poppins', sans-serif;
          text-align: center;
          padding: 10px 14px;
          border-radius: 14px;
          box-shadow: 0 4px 12px rgba(0,0,0,0.15);
          background: white;
          max-width: 220px;
        ">
          <h6 style="margin: 0; font-size: 15px; font-weight: 600; color: #333;">
            ${title}
          </h6>
          <hr style="margin: 6px 0; border: none; border-top: 1px solid #eee;">
          <p style="margin: 4px 0; font-size: 13px; color: #666;">
            üìç Exact location shared after booking
          </p>
        </div>
      `,
        });
        infoWindow.open(map, marker);

        marker.addListener("click", () => infoWindow.open(map, marker));
      }
    </script>
    
  </body>
</html>
